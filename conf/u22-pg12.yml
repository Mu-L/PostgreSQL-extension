---
#==============================================================#
# File      :   u22-12.yml
# Desc      :   Pigsty auto config for ubuntu 22.04 & PG 12
# Ctime     :   2020-05-22
# Mtime     :   2024-11-08
# Docs      :   https://pigsty.io/docs/setup/config/
# Author    :   Ruohang Feng (rh@vonng.com)
# License   :   AGPLv3
#==============================================================#

all:

  #==============================================================#
  # Clusters, Nodes, and Modules
  #==============================================================#
  children:

    #----------------------------------#
    # infra: monitor, alert, repo, etc..
    #----------------------------------#
    infra: { hosts: { 10.10.10.10: { infra_seq: 1 } } }

    #----------------------------------#
    # etcd cluster for HA postgres DCS
    #----------------------------------#
    etcd: { hosts: { 10.10.10.10: { etcd_seq: 1 } }, vars: { etcd_cluster: etcd } }

    #----------------------------------#
    # minio (OPTIONAL backup repo)
    #----------------------------------#
    #minio: { hosts: { 10.10.10.10: { minio_seq: 1 } }, vars: { minio_cluster: minio } }

    #----------------------------------#
    # pgsql (singleton on current node)
    #----------------------------------#
    # this is an example single-node postgres cluster with postgis & timescaledb installed, with one biz database & two biz users
    pg-meta:
      hosts:
        10.10.10.10: { pg_seq: 1, pg_role: primary } # <---- primary instance with read-write capability
        #x.xx.xx.xx: { pg_seq: 2, pg_role: replica } # <---- read only replica for read-only online traffic
        #x.xx.xx.xy: { pg_seq: 3, pg_role: offline } # <---- offline instance of ETL & interactive queries
      vars:
        pg_cluster: pg-meta                 # required identity parameter, usually same as group name

        # define business databases here: https://pigsty.io/docs/pgsql/db/
        pg_databases:                       # define business databases on this cluster, array of database definition
          - name: meta                      # REQUIRED, `name` is the only mandatory field of a database definition
            baseline: cmdb.sql              # optional, database sql baseline path, (relative path among ansible search path, e.g: files/)
            schemas: [ pigsty ]             # optional, additional schemas to be created, array of schema names
            extensions:                     # optional, additional extensions to be installed: array of `{name[,schema]}`
              - { name: postgis     }       # install postgis extension on this database
              - { name: timescaledb }       # install timescaledb extension on this database
            comment: pigsty meta database   # optional, comment string for this database
            #pgbouncer: true                # optional, add this database to pgbouncer database list? true by default
            #owner: postgres                # optional, database owner, postgres by default
            #template: template1            # optional, which template to use, template1 by default
            #encoding: UTF8                 # optional, database encoding, UTF8 by default. (MUST same as template database)
            #locale: C                      # optional, database locale, C by default.  (MUST same as template database)
            #lc_collate: C                  # optional, database collate, C by default. (MUST same as template database)
            #lc_ctype: C                    # optional, database ctype, C by default.   (MUST same as template database)
            #tablespace: pg_default         # optional, default tablespace, 'pg_default' by default.
            #allowconn: true                # optional, allow connection, true by default. false will disable connect at all
            #revokeconn: false              # optional, revoke public connection privilege. false by default. (leave connect with grant option to owner)
            #register_datasource: true      # optional, register this database to grafana datasources? true by default
            #connlimit: -1                  # optional, database connection limit, default -1 disable limit
            #pool_auth_user: dbuser_meta    # optional, all connection to this pgbouncer database will be authenticated by this user
            #pool_mode: transaction         # optional, pgbouncer pool mode at database level, default transaction
            #pool_size: 64                  # optional, pgbouncer pool size at database level, default 64
            #pool_size_reserve: 32          # optional, pgbouncer pool size reserve at database level, default 32
            #pool_size_min: 0               # optional, pgbouncer pool size min at database level, default 0
            #pool_max_db_conn: 100          # optional, max database connections at database level, default 100
          #- { name: grafana  ,owner: dbuser_grafana  ,revokeconn: true ,comment: grafana primary database }  # define another database

        # define business users here: https://pigsty.io/docs/pgsql/user/
        pg_users:                           # define business users/roles on this cluster, array of user definition
          - name: dbuser_meta               # REQUIRED, `name` is the only mandatory field of a user definition
            password: DBUser.Meta           # optional, password, can be a scram-sha-256 hash string or plain text
            login: true                     # optional, can log in, true by default  (new biz ROLE should be false)
            superuser: false                # optional, is superuser? false by default
            createdb: false                 # optional, can create database? false by default
            createrole: false               # optional, can create role? false by default
            inherit: true                   # optional, can this role use inherited privileges? true by default
            replication: false              # optional, can this role do replication? false by default
            bypassrls: false                # optional, can this role bypass row level security? false by default
            pgbouncer: true                 # optional, add this user to pgbouncer user-list? false by default (production user should be true explicitly)
            connlimit: -1                   # optional, user connection limit, default -1 disable limit
            expire_in: 3650                 # optional, now + n days when this role is expired (OVERWRITE expire_at)
            expire_at: '2030-12-31'         # optional, YYYY-MM-DD 'timestamp' when this role is expired  (OVERWRITTEN by expire_in)
            comment: pigsty admin user      # optional, comment string for this user/role
            roles: [dbrole_admin]           # optional, belonged roles. default roles are: dbrole_{admin,readonly,readwrite,offline}
            parameters: {}                  # optional, role level parameters with `ALTER ROLE SET`
            pool_mode: transaction          # optional, pgbouncer pool mode at user level, transaction by default
            pool_connlimit: -1              # optional, max database connections at user level, default -1 disable limit
          - { name: dbuser_view ,password: DBUser.Viewer ,pgbouncer: true ,roles: [dbrole_readonly], comment: read-only viewer for meta database }

        # define pg extensions: https://pigsty.io/docs/pgext/ , and available alias: https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/deb.yml
        pg_libs: 'timescaledb, pg_stat_statements, auto_explain' # add timescaledb to shared_preload_libraries
        #pg_extensions:
        #  - timescaledb timescaledb_toolkit pg_timeseries periods temporal_tables emaj table_version pg_cron pg_background #pg_later
        #  - postgis pgrouting pointcloud pg_h3 q3c ogr_fdw geoip pg_polyline pg_geohash mobilitydb
        #  - pgvector pg_similarity pg_summarize pg_tiktoken pg4ml #pgvectorscale #pg_vectorize #smlar #pgml
        #  - pg_bigm zhparser hunspell #pg_search
        #  - duckdb_fdw pg_fkpart pg_partman plproxy #citus10 #hydra #pg_analytics #pg_duckdb #pg_mooncake #pg_parquet #pg_strom
        #  - age hll rum pg_jsonschema jsquery pg_hint_plan hypopg index_advisor pg_plan_filter imgsmlr pgmq pgq pg_cardano rdkit #pg_graphql #pg_ivm
        #  - pg_tle plv8 pllua plprql pldebugger plpgsql_check plprofiler plsh pljava #plr #pgtap #faker #dbt2
        #  - prefix semver pgunit md5hash asn1oid roaringbitmap pgsphere pg_country pg_currency pgmp numeral pg_rational pguint pg_uint128 ip4r pg_uri pgemailaddr acl debversion pg_rrule timestamp9 chkpass #pgfaceting
        #  - topn pg_gzip pg_zstd pg_http pg_net pg_html5_email_address pgsql_tweaks pg_extra_time pg_timeit count_distinct extra_window_functions first_last_agg tdigest aggs_for_vecs aggs_for_arrays pg_arraymath quantile lower_quantile
        #  - pg_idkit pg_uuidv7 permuteseq pg_hashids sequential_uuids pg_math pg_random pg_base36 pg_base62 pg_base58 floatvec pg_financial pgjwt pg_hashlib shacrypt cryptint pg_ecdsa pgpcre icu_ext pgqr envvar pg_protobuf url_encode #pg_smtp_client
        #  - pg_repack pg_squeeze pg_dirtyread pgfincore pgdd ddlx pg_prioritize pg_checksums pg_readonly pg_permissions pgautofailover pg_catcheck preprepare pgcozy pg_orphaned pg_crash pg_cheat_funcs table_log pg_fio #safeupdate #pg_savior #pgpool #pgagent
        #  - pg_profile pg_show_plans pg_stat_kcache pg_stat_monitor pg_qualstats pg_store_plans pg_track_settings pg_wait_sampling system_stats pg_meta pgnodemx pg_sqlog bgw_replstatus pgmeminfo toastinfo pg_explain_ui pg_relusage pagevis powa #pg_top
        #  - passwordcheck pgsodium pg_vault anonymizer pgsmcrypto pgaudit pgauditlogtofile pg_auth_mon credcheck pgcryptokey pg_jobmon logerrors login_hook set_user pg_snakeoil pgextwlist pg_auditor sslutils noset #supautils #pg_session_jwt #pg_tde
        #  - mysql_fdw tds_fdw sqlite_fdw redis_fdw pg_redis_pubsub kafka_fdw firebird_fdw aws_s3 #wrappers #multicorn #odbc_fdw #jdbc_fdw #oracle_fdw #db2_fdw #pgbouncer_fdw #mongo_fdw #hdfs_fdw #log_fdw
        #  - orafce pgtt session_variable pg_statement_rollback pgmemcache #pg_dbms_metadata #pg_dbms_lock #pg_dbms_job #wiltondb
        #  - pglogical pglogical_ticker pgl_ddl_deploy pg_failover_slots wal2json decoderbufs decoder_raw mimeo pg_fact_loader #wal2mongo #repmgr #pg_bulkload

        # define HBA rules here: https://pigsty.io/docs/pgsql/hba/#define-hba
        pg_hba_rules:                       # example hba rules
          - {user: dbuser_view , db: all ,addr: infra ,auth: pwd ,title: 'allow grafana dashboard access cmdb from infra nodes'}

        #pg_vip_enabled: true               # define a L2 VIP which bind to cluster primary instance
        #pg_vip_address: 10.10.10.2/24      # L2 VIP Address and netmask
        #pg_vip_interface: eth1             # L2 VIP Network interface, overwrite on host vars if member have different network interface names
        node_crontab: [ '00 01 * * * postgres /pg/bin/pg-backup full' ] # make a full backup every 1am

    #----------------------------------#
    # example cluster (3-node pg-test)
    #----------------------------------#
    #pg-test:                          # define the new 3-node cluster pg-test
    #  hosts:
    #    10.10.10.11: { pg_seq: 1, pg_role: primary }   # primary instance, leader of cluster
    #    10.10.10.12: { pg_seq: 2, pg_role: replica }   # replica instance, follower of leader
    #    10.10.10.13: { pg_seq: 3, pg_role: replica, pg_offline_query: true } # replica with offline access
    #  vars:
    #    pg_cluster: pg-test            # define pgsql cluster name
    #    pg_users:  [{ name: test , password: test , pgbouncer: true , roles: [ dbrole_admin ] }]
    #    pg_databases: [{ name: test }] # create a database and user named 'test'
    #    node_tune: tiny
    #    pg_conf: tiny.yml
    #    pg_vip_enabled: true
    #    pg_vip_address: 10.10.10.3/24
    #    pg_vip_interface: eth1
    #    node_crontab:  # make a full backup on monday 1am, and an incremental backup during weekdays
    #      - '00 01 * * 1 postgres /pg/bin/pg-backup full'
    #      - '00 01 * * 2,3,4,5,6,7 postgres /pg/bin/pg-backup'


  #==============================================================#
  # Global Parameters
  #==============================================================#
  vars:

    #----------------------------------#
    # Meta Data
    #----------------------------------#
    version: v3.0.4                   # pigsty version string
    admin_ip: 10.10.10.10             # admin node ip address
    region: default                   # upstream mirror region: default|china|europe
    node_tune: tiny                   # node tuning specs: oltp,olap,tiny,crit
    pg_conf: tiny.yml                 # pgsql tuning specs: {oltp,olap,tiny,crit}.yml
    proxy_env:                        # global proxy env when downloading packages
      no_proxy: "localhost,127.0.0.1,10.0.0.0/8,192.168.0.0/16,*.pigsty,*.aliyun.com,mirrors.*,*.myqcloud.com,*.tsinghua.edu.cn"
      # http_proxy:  # set your proxy here: e.g http://user:pass@proxy.xxx.com
      # https_proxy: # set your proxy here: e.g http://user:pass@proxy.xxx.com
      # all_proxy:   # set your proxy here: e.g http://user:pass@proxy.xxx.com
    infra_portal:                     # domain names and upstream servers
      home         : { domain: h.pigsty }
      grafana      : { domain: g.pigsty ,endpoint: "${admin_ip}:3000" , websocket: true }
      prometheus   : { domain: p.pigsty ,endpoint: "${admin_ip}:9090" }
      alertmanager : { domain: a.pigsty ,endpoint: "${admin_ip}:9093" }
      blackbox     : { endpoint: "${admin_ip}:9115" }
      loki         : { endpoint: "${admin_ip}:3100" }
      #minio        : { domain: sss.pigsty  ,endpoint: "${admin_ip}:9001" ,scheme: https ,websocket: true }

    #----------------------------------#
    # MinIO Related Options
    #----------------------------------#
    #pgbackrest_method: minio          # if you want to use minio as backup repo instead of 'local' fs, uncomment this
    #minio_users:                      # and configure `pgbackrest_repo` & `minio_users` accordingly
    #  - { access_key: dba , secret_key: S3User.DBA, policy: consoleAdmin }
    #  - { access_key: pgbackrest , secret_key: S3User.Backup, policy: readwrite }
    #pgbackrest_repo:                  # pgbackrest repo: https://pgbackrest.org/configuration.html#section-repository
    #  minio: ...                      # optional minio repo for pgbackrest ...
    #    s3_key: pgbackrest            # minio user access key for pgbackrest
    #    s3_key_secret: S3User.Backup  # minio user secret key for pgbackrest
    #    cipher_pass: pgBackRest       # AES encryption password, default is 'pgBackRest'
    # if you want to use minio as backup repo instead of 'local' fs, uncomment this, and configure `pgbackrest_repo`
    #pgbackrest_method: minio
    #node_etc_hosts: [ '10.10.10.10 h.pigsty a.pigsty p.pigsty g.pigsty sss.pigsty' ] # minio domain sss.pigsty is required

    #----------------------------------#
    # Credential: CHANGE THESE PASSWORDS
    #----------------------------------#
    #grafana_admin_username: admin
    grafana_admin_password: pigsty
    #pg_admin_username: dbuser_dba
    pg_admin_password: DBUser.DBA
    #pg_monitor_username: dbuser_monitor
    pg_monitor_password: DBUser.Monitor
    #pg_replication_username: replicator
    pg_replication_password: DBUser.Replicator
    #patroni_username: postgres
    patroni_password: Patroni.API
    #haproxy_admin_username: admin
    haproxy_admin_password: pigsty

    #----------------------------------#
    # Safe Guard
    #----------------------------------#
    # you can enable these flags after bootstrap, to prevent purging running etcd / pgsql instances
    etcd_safeguard: false             # prevent purging running etcd instance?
    pg_safeguard: false               # prevent purging running postgres instance? false by default

    #----------------------------------#
    # Repo, Node, Packages
    #----------------------------------#
    # if you wish to customize your own repo, change these settings:
    repo_modules: infra,node,pgsql    # install upstream repo during repo bootstrap
    repo_remove: true                 # remove existing repo on admin node during repo bootstrap
    node_repo_modules: local          # install the local module in repo_upstream for all nodes
    node_repo_remove: true            # remove existing node repo for node managed by pigsty

    # upstream repo to be downloaded from
    repo_upstream:
      - { name: pigsty-local  ,description: 'Pigsty Local'     ,module: local     ,releases: [11,12,20,22,24] ,baseurl: { default: 'http://${admin_ip}/pigsty ./' }}
      - { name: pigsty-pgsql  ,description: 'Pigsty PgSQL'     ,module: pgsql     ,releases: [11,12,20,22,24] ,baseurl: { default: 'https://repo.pigsty.io/apt/pgsql/${distro_codename} ${distro_codename} main', china: 'https://repo.pigsty.cc/apt/pgsql/${distro_codename} ${distro_codename} main' }}
      - { name: pigsty-infra  ,description: 'Pigsty Infra'     ,module: infra     ,releases: [11,12,20,22,24] ,baseurl: { default: 'https://repo.pigsty.io/apt/infra/ generic main' ,china: 'https://repo.pigsty.cc/apt/infra/ generic main' }}
      - { name: nginx         ,description: 'Nginx'            ,module: infra     ,releases: [11,12,20,22,24] ,baseurl: { default: 'http://nginx.org/packages/mainline/${distro_name} ${distro_codename} nginx' }}
      - { name: base          ,description: 'Debian Basic'     ,module: node      ,releases: [11,12         ] ,baseurl: { default: 'http://deb.debian.org/debian/ ${distro_codename} main non-free-firmware'         ,china: 'https://mirrors.aliyun.com/debian/ ${distro_codename} main restricted universe multiverse' }}
      - { name: updates       ,description: 'Debian Updates'   ,module: node      ,releases: [11,12         ] ,baseurl: { default: 'http://deb.debian.org/debian/ ${distro_codename}-updates main non-free-firmware' ,china: 'https://mirrors.aliyun.com/debian/ ${distro_codename}-updates main restricted universe multiverse' }}
      - { name: security      ,description: 'Debian Security'  ,module: node      ,releases: [11,12         ] ,baseurl: { default: 'http://security.debian.org/debian-security ${distro_codename}-security main non-free-firmware' }}
      - { name: base          ,description: 'Ubuntu Basic'     ,module: node      ,releases: [      20,22,24] ,baseurl: { default: 'https://mirrors.edge.kernel.org/${distro_name}/ ${distro_codename}   main universe multiverse restricted' ,china: 'https://mirrors.aliyun.com/${distro_name}/ ${distro_codename}   main restricted universe multiverse' }}
      - { name: updates       ,description: 'Ubuntu Updates'   ,module: node      ,releases: [      20,22,24] ,baseurl: { default: 'https://mirrors.edge.kernel.org/ubuntu/ ${distro_codename}-backports main restricted universe multiverse' ,china: 'https://mirrors.aliyun.com/ubuntu/ ${distro_codename}-updates   main restricted universe multiverse' }}
      - { name: backports     ,description: 'Ubuntu Backports' ,module: node      ,releases: [      20,22,24] ,baseurl: { default: 'https://mirrors.edge.kernel.org/ubuntu/ ${distro_codename}-security  main restricted universe multiverse' ,china: 'https://mirrors.aliyun.com/ubuntu/ ${distro_codename}-backports main restricted universe multiverse' }}
      - { name: security      ,description: 'Ubuntu Security'  ,module: node      ,releases: [      20,22,24] ,baseurl: { default: 'https://mirrors.edge.kernel.org/ubuntu/ ${distro_codename}-updates   main restricted universe multiverse' ,china: 'https://mirrors.aliyun.com/ubuntu/ ${distro_codename}-security  main restricted universe multiverse' }}
      - { name: pgdg          ,description: 'PGDG'             ,module: pgsql     ,releases: [11,12,20,22,24] ,baseurl: { default: 'http://apt.postgresql.org/pub/repos/apt/ ${distro_codename}-pgdg main' ,china: 'https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/apt/ ${distro_codename}-pgdg main' }}
      - { name: citus         ,description: 'Citus'            ,module: pgsql     ,releases: [11,12,20,22   ] ,baseurl: { default: 'https://packagecloud.io/citusdata/community/${distro_name}/ ${distro_codename} main' } }
      - { name: timescaledb   ,description: 'Timescaledb'      ,module: pgsql     ,releases: [11,12,20,22,24] ,baseurl: { default: 'https://packagecloud.io/timescale/timescaledb/${distro_name}/ ${distro_codename} main' }}

    # packages to be downloaded from upstream, you can add or remove packages here
    repo_packages:
      - ansible python3 python3-pip python3-venv python3-jmespath dpkg-dev sshpass                                                                             # Distro & Boot
      - nginx dnsmasq etcd haproxy vip-manager pg-exporter pgbackrest-exporter                                                                                 # Pigsty Addons
      - grafana loki logcli promtail prometheus2 alertmanager pushgateway node-exporter blackbox-exporter nginx-exporter keepalived-exporter                   # Infra Packages
      - redis-exporter redis minio mcli ferretdb duckdb docker-ce docker-compose-plugin                                                                        # Extra Modules
      - lz4 unzip bzip2 zlib1g pv jq git ncdu make patch bash lsof wget uuid tuned nvme-cli numactl sysstat iotop htop rsync tcpdump acl chrony                # Node Tools 1
      - netcat-openbsd socat lrzsz net-tools ipvsadm dnsutils telnet ca-certificates libreadline-dev vim-tiny keepalived openssl openssh-server openssh-client # Node Tools 2
      - patroni pgbouncer pgbackrest pgbadger pg-activity postgresql-filedump pgxnclient pgformatter timescaledb-tools pgcopydb pgloader pg-timetable          # PGDG Common
      - ftp linux-tools-generic                                                                                                                                # Extra for u22
      - postgresql-12 postgresql-client-12 postgresql-server-dev-12 postgresql-plpython3-12 postgresql-plperl-12 postgresql-pltcl-12                           # PostgreSQL 12
      - timescaledb-2-postgresql-12 timescaledb-toolkit-postgresql-12 postgresql-12-pg-timeseries postgresql-12-periods postgresql-12-temporal-tables postgresql-12-emaj postgresql-12-tableversion postgresql-12-cron postgresql-12-pg-background #postgresql-12-pg-later
      - postgresql-12-postgis-3 postgresql-12-postgis-3-scripts postgresql-12-pgrouting postgresql-12-pgrouting-scripts postgresql-12-pointcloud postgresql-12-h3 postgresql-12-q3c postgresql-12-ogr-fdw postgresql-12-geoip postgresql-12-pg-polyline postgresql-12-pg-geohash postgresql-12-mobilitydb
      - postgresql-12-pgvector postgresql-12-similarity postgresql-12-pg-summarize postgresql-12-pg-tiktoken postgresql-12-pg4ml #postgresql-12-pgvectorscale #postgresql-12-pg-vectorize #postgresql-12-smlar #postgresql-12-pgml
      - postgresql-12-pg-bigm postgresql-12-zhparser postgresql-12-hunspell-cs-cz postgresql-12-hunspell-de-de postgresql-12-hunspell-en-us postgresql-12-hunspell-fr postgresql-12-hunspell-ne-np postgresql-12-hunspell-nl-nl postgresql-12-hunspell-nn-no postgresql-12-hunspell-pt-pt postgresql-12-hunspell-ru-ru postgresql-12-hunspell-ru-ru-aot #postgresql-12-pg-search
      - postgresql-12-citus-10.2 postgresql-12-duckdb-fdw postgresql-12-pg-fkpart postgresql-12-partman postgresql-12-plproxy #postgresql-12-hydra #postgresql-12-pg-analytics #postgresql-12-pg-duckdb #postgresql-12-pg-mooncake #postgresql-12-pg-parquet
      - postgresql-12-age postgresql-12-hll postgresql-12-rum postgresql-12-pg-jsonschema postgresql-12-jsquery postgresql-12-pg-hint-plan postgresql-12-hypopg postgresql-12-index-advisor postgresql-12-pg-plan-filter postgresql-12-imgsmlr postgresql-12-pgmq postgresql-12-pgq3 postgresql-12-pg-cardano postgresql-12-rdkit #postgresql-12-pg-graphql #postgresql-12-pg-ivm
      - postgresql-12-pg-tle postgresql-12-plv8 postgresql-12-pllua postgresql-12-plprql postgresql-12-pldebugger postgresql-12-plpgsql-check postgresql-12-plprofiler postgresql-12-plsh postgresql-12-pljava #postgresql-12-plr #postgresql-12-pgtap
      - postgresql-12-prefix postgresql-12-semver postgresql-12-unit postgresql-12-md5hash postgresql-12-asn1oid postgresql-12-roaringbitmap postgresql-12-pgsphere postgresql-12-pg-country postgresql-12-pg-currency postgresql-12-pgmp postgresql-12-numeral postgresql-12-rational postgresql-12-pguint postgresql-12-pg-uint128 postgresql-12-ip4r postgresql-12-pg-uri postgresql-12-pg-emailaddr postgresql-12-acl postgresql-12-debversion postgresql-12-pg-rrule postgresql-12-timestamp9 postgresql-12-chkpass #postgresql-12-pgfaceting
      - postgresql-12-topn postgresql-12-gzip postgresql-12-pg-zstd postgresql-12-http postgresql-12-pg-net postgresql-12-pg-html5-email-address postgresql-12-pgsql-tweaks postgresql-12-pg-extra-time postgresql-12-pg-timeit postgresql-12-count-distinct postgresql-12-extra-window-functions postgresql-12-first-last-agg postgresql-12-tdigest postgresql-12-aggs-for-vecs postgresql-12-aggs-for-arrays postgresql-12-pg-arraymath postgresql-12-quantile postgresql-12-lower-quantile
      - postgresql-12-pg-idkit postgresql-12-pg-uuidv7 postgresql-12-permuteseq postgresql-12-pg-hashids postgresql-12-sequential-uuids postgresql-12-pg-math postgresql-12-random postgresql-12-base36 postgresql-12-base62 postgresql-12-pg-base58 postgresql-12-floatvec postgresql-12-pg-financial postgresql-12-pgjwt postgresql-12-pg-hashlib postgresql-12-shacrypt postgresql-12-cryptint postgresql-12-pg-ecdsa postgresql-12-pgpcre postgresql-12-icu-ext postgresql-12-pgqr postgresql-12-pg-envvar postgresql-12-pg-protobuf postgresql-12-url-encode #postgresql-12-pg-smtp-client
      - postgresql-12-repack postgresql-12-squeeze postgresql-12-dirtyread postgresql-12-pgfincore postgresql-12-pgdd postgresql-12-ddlx postgresql-12-prioritize postgresql-12-pg-checksums postgresql-12-pg-readonly postgresql-12-pg-permissions postgresql-12-auto-failover postgresql-12-pg-catcheck postgresql-12-preprepare postgresql-12-pgcozy postgresql-12-pg-orphaned postgresql-12-pg-crash postgresql-12-pg-cheat-funcs postgresql-12-tablelog postgresql-12-pg-fio #postgresql-12-pg-safeupdate #postgresql-12-pg-savior #postgresql-12-pgpool2 #pgagent
      - postgresql-12-pg-profile postgresql-12-show-plans postgresql-12-pg-stat-kcache postgresql-12-pg-stat-monitor postgresql-12-pg-qualstats postgresql-12-pg-store-plan postgresql-12-pg-track-settings postgresql-12-pg-wait-sampling postgresql-12-system-stats postgresql-12-pg-meta postgresql-12-pgnodemx postgresql-12-pg-sqlog postgresql-12-bgw-replstatus postgresql-12-pgmeminfo postgresql-12-toastinfo postgresql-12-pg-explain-ui postgresql-12-pg-relusage postgresql-12-pagevis postgresql-12-powa
      - postgresql-12-passwordcheck-cracklib postgresql-12-pgsodium postgresql-12-vault postgresql-12-anonymizer postgresql-12-pgsmcrypto postgresql-12-pgaudit postgresql-12-pgauditlogtofile postgresql-12-pg-auth-mon postgresql-12-credcheck postgresql-12-pgcryptokey postgresql-12-pg-jobmon postgresql-12-logerrors postgresql-12-login-hook postgresql-12-set-user postgresql-12-snakeoil postgresql-12-pgextwlist postgresql-12-pg-auditor postgresql-12-sslutils postgresql-12-noset #postgresql-12-supautils #postgresql-12-pg-session-jwt #postgresql-12-pg-tde
      - postgresql-12-mysql-fdw postgresql-12-tds-fdw postgresql-12-sqlite-fdw postgresql-12-redis-fdw postgresql-12-pg-redis-pubsub postgresql-12-kafka-fdw postgresql-12-firebird-fdw postgresql-12-aws-s3 #postgresql-12-wrappers # #postgresql-12-oracle-fdw #postgresql-12-log-fdw
      - postgresql-12-orafce postgresql-12-pgtt postgresql-12-session-variable postgresql-12-pg-statement-rollback postgresql-12-pgmemcache # #wiltondb
      - postgresql-12-pglogical postgresql-12-pglogical-ticker postgresql-12-pgl-ddl-deploy postgresql-12-pg-failover-slots postgresql-12-wal2json postgresql-12-decoderbufs postgresql-12-decoder-raw postgresql-12-mimeo postgresql-12-pg-fact-loader #postgresql-12-wal2mongo #postgresql-12-repmgr #postgresql-12-pg-bulkload

    #----------------------------------#
    # PGSQL
    #----------------------------------#
    pg_version: 12                    # postgres major version to be installed
    pg_packages:                      # pg packages to be installed, alias can be used
      - postgresql
      - patroni pgbouncer pgbackrest pg_exporter pgbadger vip-manager wal2json pg_repack
    pg_extensions:                    # pg extensions to be installed, alias can be used
      - postgis timescaledb pgvector

...